\documentclass[b5paper, 11pt, twoside, onecolumn, openany]{memoir}

%%% PACKAGES
%%%------------------------------------------------------------------------

\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[greek,english,main=russian]{babel}
\usepackage[final,letterspace=150]{microtype} % Less badboxes
\usepackage{bookmark}
\usepackage{footnotehyper}
\usepackage{multicol}
\usepackage{fancyhdr} % Required by poemscol
\usepackage{poemscol}
\usepackage{geometry}
\usepackage{pifont}

% \usepackage{kpfonts} %Font

\usepackage{amsmath,amssymb,mathtools} % Math

% \usepackage{tikz} % Figures
\usepackage{graphicx} % Include figures

%%% PAGE LAYOUT
%%%------------------------------------------------------------------------

\setlrmarginsandblock{0.11\paperwidth}{*}{1} % Left and right margin
\setulmarginsandblock{0.14\paperwidth}{*}{1} % Upper and lower margin
\checkandfixthelayout

\clubpenalty=10000
\widowpenalty=10000
\raggedbottom

%%% SECTIONAL DIVISIONS
%%%------------------------------------------------------------------------

\maxsecnumdepth{section} % Subsections (and higher) are numbered
\setsecnumdepth{section}

\makeatletter %
\makechapterstyle{standard}{
  \setlength{\beforechapskip}{0.8\baselineskip}
  \setlength{\midchapskip}{0\baselineskip}
  \setlength{\afterchapskip}{0.5\baselineskip}
  \renewcommand{\chapterheadstart}{\vspace*{\beforechapskip}}
  \renewcommand{\chapnamefont}{\centering\normalfont\Large}
  \renewcommand{\printchaptername}{\chapnamefont \@chapapp}
  \renewcommand{\chapternamenum}{\space}
  \renewcommand{\chapnumfont}{\normalfont\Large}
  \renewcommand{\printchapternum}{\chapnumfont \thechapter}
  \renewcommand{\afterchapternum}{\par\nobreak\vskip \midchapskip}
  \renewcommand{\printchapternonum}{\vspace*{\midchapskip}\vspace*{5mm}}
  \renewcommand{\chaptitlefont}{\centering\bfseries\normalsize}
  \renewcommand{\printchaptertitle}[1]{\chaptitlefont ##1}
  \renewcommand{\afterchaptertitle}{\par\nobreak\vskip \afterchapskip}

  % Part titles
  \renewcommand{\beforepartskip}{}
  \renewcommand{\afterpartskip}{\bigskip}

  \renewcommand{\clearforchapter}{}
}
\makeatother

\chapterstyle{standard}

\newcommand{\styledsubsubsection}[2][]{%
  \subsubsection[#1]{\normalsize\mdseries\em #2}}

\newcommand{\addtocspace}[1]{%
  \addtocontents{toc}{\vspace{#1}}}

\newcommand{\hegpart}[2][]{%
  \addtocontents{toc}{\vspace{4mm}%
    {\centering\bfseries\em #1\\\vspace{2mm}}}%
  \part[\small\MakeUppercase{#2}]%
       {\begin{Spacing}{1.6}\small\textsc{\lsstyle\mdseries%
        #1}\nopagebreak\\\normalsize\MakeUppercase{#2}\end{Spacing}}}

\newcommand{\hegchapter}[2][]{%
  \chapter[{\em #1.} #2]{%
    \fontsize{11}{18}\selectfont{\em\mdseries #1}\nopagebreak\\%
    \vspace{1mm}\\%
    \MakeUppercase{#2}%
    \nopagebreak%
    \vspace{2mm}\\}%
    \addtocspace{1mm}%
    \thispagestyle{plain}}

\newcommand{\hegsection}[2][]{%
  \section[#1]{\small\MakeUppercase{#2}}}

\newcommand{\hegremark}[3][]{%
  \subsubsection[#1. #2]{\centering {\lsstyle\mdseries #1}\nopagebreak\\%
  \vspace{1mm}\\%
  \footnotesize #3}}

\setsecheadstyle{\normalfont\bfseries\centering}
\setsubsecheadstyle{\normalfont\normalsize\bfseries\centering}
\setparaheadstyle{\normalfont\normalsize\bfseries}
\setparaindent{0pt}\setafterparaskip{0pt}

\usepackage{indentfirst}
\setlength\parindent{6mm}

%%% FLOATS AND CAPTIONS
%%%------------------------------------------------------------------------

\makeatletter % You do not need to write [htpb] all the time
\renewcommand\fps@figure{htbp}
\renewcommand\fps@table{htbp}
\makeatother

\captiondelim{\space } % A space between caption name and text
\captionnamefont{\small\bfseries} % Font of the caption name
\captiontitlefont{\small\normalfont} % Font of the caption text

\changecaptionwidth % Change the width of the caption
\captionwidth{1\textwidth}

%%% ABSTRACT
%%%------------------------------------------------------------------------

\renewcommand{\abstractnamefont}{\normalfont\small\bfseries} % Abstract title
\setlength{\absleftindent}{0.1\textwidth} % Width of abstract
\setlength{\absrightindent}{\absleftindent}

\tightlists

%%% HEADER AND FOOTER
%%%------------------------------------------------------------------------

\makepagestyle{standard} % Make standard pagestyle

\makeatletter % Define standard pagestyle
\makeevenfoot{standard}{}{}{}
\makeoddfoot{standard}{}{}{}
\makeevenhead{standard}{\bfseries\thepage\normalfont\qquad\small\leftmark}{}{}
\makeoddhead{standard}{}{}{\small\rightmark\qquad\bfseries\thepage}
% \makeheadrule{standard}{\textwidth}{\normalrulethickness}
\makeatother

\makeatletter
\makepsmarks{standard}{
\createmark{chapter}{both}{nonumber}{\@chapapp\ }{ \quad }
\createmark{chapter}{right}{nonumber}{}{ \quad }
\createmark{section}{right}{nonumber}{}{ \quad }
\createmark{subsection}{right}{nonumber}{}{ \quad }
\createplainmark{toc}{both}{\contentsname}
\createplainmark{lof}{both}{\listfigurename}
\createplainmark{lot}{both}{\listtablename}
\createplainmark{bib}{both}{\bibname}
\createplainmark{index}{both}{\indexname}
\createplainmark{glossary}{both}{\glossaryname}
}
\makeatother                               %

\makepagestyle{chap} % Make new chapter pagestyle

\makeatletter
\makeevenfoot{chap}{}{}{} % Define new chapter pagestyle
\makeoddfoot{chap}{}{}{}
\makeevenhead{chap}{}{}{}
\makeoddhead{chap}{}{}{}
% \makeheadrule{chap}{\textwidth}{\normalrulethickness}
\makeatother

\nouppercaseheads
\pagestyle{standard}   % Choosing pagestyle and chapter pagestyle
\aliaspagestyle{chapter}{chap}

%%% END NOTES
%%%------------------------------------------------------------------------
\makepagenote
\continuousnotenums
\notepageref

\let\oldpagenote\pagenote%
  \renewcommand{\pagenote}[1]{%
  {\fontsize{8}{8}\selectfont%
  \:\oldpagenote{#1}}}
  %\textsuperscript{~(}\oldpagenote{#1}\textsuperscript{)}}}

\let\oldfootnote\footnote%
  \renewcommand{\footnote}[1]{%
  \,\oldfootnote{~#1}}

\renewcommand{\noteidinnotes}[2]{%
  \hspace{9mm}\textsuperscript{#1}\hspace{1.5mm}}
\renewcommand{\pageinnotes}[1]{%
  К~\hyperref[#1]{стр.~\pageref*{#1}.} ---}

\renewcommand*{\thefootnote}{\ding{93}}

\renewcommand*{\footnoterule}{%
  \kern-3pt%
  \hrule width 0.17\columnwidth
  \kern 2.6pt
  \vspace{1mm}}

\renewcommand*{\notedivision}{}

\renewcommand*{\pagenotesubhead}[3]{}

\renewcommand*{\pagenotesubheadstarred}[3]{}

%%% TEXT
%%%------------------------------------------------------------------------

\renewcommand{\baselinestretch}{0.82}
\setPagenoteSpacing{0.82}
\setFloatSpacing{0.82}

%%% NEW COMMANDS
%%%------------------------------------------------------------------------

\newcommand{\hm}[1]{#1\nobreak\discretionary{}{\hbox{\ensuremath{#1}}}{}}

\maxtocdepth{paragraph} % ToC depth
\settocdepth{paragraph}
\addto\captionsrussian{\renewcommand{\contentsname}{ОГЛАВЛЕНИЕ}}
\setlength{\cftbeforepartskip}{0.5mm}

\AtEndDocument{\addtocontents{toc}{\par}} % Add a \par to the end of the TOC

\usepackage{hyperref}   % Internal hyperlinks
\hypersetup{
  pdfborder={0 0 0},    % No borders around internal hyperlinks
  pdfauthor={ФРА}       % author
}
\usepackage{memhfixc}

\author{Г.~В.~Ф. Гегель}
\title{Наука логики}
\date{}

\renewcommand{\partnumberline}[1]{} % Remove part number in ToC
\renewcommand{\cftpartdotsep}{\cftdotsep} % Part dots in ToC
\renewcommand{\chapternumberline}[1]{} % Remove chapter number in ToC
\renewcommand{\cftchapterdotsep}{\cftdotsep} % Chapter dots in ToC

\renewcommand{\printpartname}{}
\renewcommand{\thepart}{}

\renewcommand{\printchaptername}{}
\renewcommand{\thechapter}{}

\makeatletter
\renewcommand{\@seccntformat}[1]{}
\makeatother

% Remove section numbers in ToC
\let\oldcftsf\cftsectionfont% save definition of \cftsectionfont
\let\oldcftspn\cftsectionafterpnum% and of \cftsectionafterpnum
\renewcommand*{\cftsectionfont}{%
\let\oldnl\numberline% save definition of \numberline
\renewcommand*{\numberline}[1]{}% change it
\oldcftsf} % use original \cftsectionfont
\renewcommand*{\cftsectionafterpnum}{%
\let\numberline\oldnl% % restore orginal \numberline
\oldcftspn} % use original \cftsectionafterpnum

\cftpagenumbersoff{book}
\renewcommand*{\cftbookfont}{\hfil}
\renewcommand*{\cftbookafterpnum}{\hfil}

\begin{document}

\frontmatter
\pagestyle{empty}

{\centering
  {\Large Г.~В.~Ф.~ГЕГЕЛЬ} \\
  \vspace{130pt}
  \textbf{\Huge НАУКА ЛОГИКИ} \\
  \vspace{60pt}
  {\Large Том~I. Объективная логика} \\
  \vspace{8pt}
  {\large Книга~I. Учение о бытии} \\
  \vspace{70pt}
  \textit{перевод} \\
  \textit{Б.~Г.~СТОЛПНЕРА} \\
  \vspace{10pt}
  \textit{под редакцией} \\
  \textit{М.~Б.~МИТИНА}
\par}

\clearpage

\pagestyle{plain}
\pagenumbering{Roman}
\setcounter{page}{1}
\renewcommand{\parttitlefont}{\large}
\part[\normalsize{\em Ленин,} О~значении воинствующего материализма]%
     {{\em В.~И.~Ленин}\\{\bfseries О~значении воинствующего материализма}}
\input{001_o_znachenii.tex}

\cleardoublepage
\pagestyle{empty}

{\centering
  \ \\
  \vspace{50mm}
  {\huge\bfseries ГЕГЕЛЬ} \\
  \vspace{50mm}
  {\Huge\bfseries НАУКА ЛОГИКИ}
\par}

\addtocontents{toc}{\vspace{4mm}%
  {\centering%
    \normalsize\bfseries\em Гегель <<НАУКА ЛОГИКИ>>\\%
  }%
  \vspace{1mm}}

\newgeometry{left=15mm,right=15mm,top=25mm,bottom=5mm}

\begin{center}
\includegraphics[width=14cm]{hegel-img001.png}
\end{center}

\restoregeometry

\mainmatter

\pagestyle{plain}

\section[Предисловие к первому изданию]{\large ПРЕДИСЛОВИЕ К ПЕРВОМУ ИЗДАНИЮ}
\thispagestyle{empty}
\input{002_predislovie.tex}

\clearpage

\section[Предисловие ко второму изданию]{\large ПРЕДИСЛОВИЕ КО ВТОРОМУ ИЗДАНИЮ}
\thispagestyle{empty}
\input{003_predislovie.tex}

\clearpage

\section[Введение]{\large ВВЕДЕНИЕ}
\thispagestyle{empty}
\input{004_vvedenie.tex}

\addtocontents{toc}{\vspace{7mm}%
  {\centering\lsstyle\normalsize\bfseries Первая книга\\}%
   \vspace{2mm}}

\part[\hspace{38mm}УЧЕНИЕ О БЫТИИ]%
     {\ \\\vspace{200pt}\Large\mdseries ПЕРВАЯ КНИГА\\\ \\
      \LARGE\bfseries УЧЕНИЕ О БЫТИИ}
\addtocspace{2mm}

\thispagestyle{empty}
\cleardoublepage
\section[С~чего следует начинать науку]{С~ЧЕГО СЛЕДУЕТ НАЧИНАТЬ НАУКУ}
\pagestyle{plain}
\input{101_s_chego.tex}

\hegpart[Первый отдел]{Определенность (качество)}

% Первая глава. Бытие.
\input{111_bytie.tex}

\hegchapter[Вторая глава]{Наличное бытие}
\input{112_nalichnoe_bytie.tex}

\hegchapter[Третья глава]{Для-себя-бытие}
\input{113_dlya_sebya_bytie.tex}

\hegpart[Второй отдел]{Величина (количество)}

% Первая глава. Количество.
\input{121_kolichestvo.tex}

\hegchapter[Вторая глава]{Определенное количество}
\input{122_opredelyonnoe_kolichestvo.tex}

\hegchapter[Третья глава]{Количественное отношение}
\input{123_kolichestvennoe_otnoshenie.tex}

\hegpart[Третий отдел]{Мера}

% Первая глава. Специфическое количество.
\input{131_specificheskoe_kolichestvo.tex}

\hegchapter[Вторая глава]{Реальная мера}
\input{132_realnaya_mera.tex}

\hegchapter[Третья глава]{Становление сущности}
\input{133_stanovlenie_suschnosti.tex}

\backmatter

\addtocontents{toc}{\vspace{6mm}%
  {\centering\normalsize\bfseries ПРИЛОЖЕНИЯ\\}}

\part*{ПРИЛОЖЕНИЯ}
% Предисловие издателя (Леопольда фон Геннинга)
\input{141_prilozhenija.tex}

\clearpage

\chapter[\mdseries Примечания]{ПРИМЕЧАНИЯ}
\input{142_primechanija.tex}

\clearpage
\tableofcontents*
\clearpage

\end{document}
